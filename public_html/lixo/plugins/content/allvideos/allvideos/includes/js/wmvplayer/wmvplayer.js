if("undefined"==typeof jeroenwijering){var jeroenwijering=new Object;jeroenwijering.utils=new Object}jeroenwijering.Player=function(i,t,e){this.controller,this.model,this.view,this.configuration={backgroundcolor:"FFFFFF",windowless:"false",file:"",height:"260",image:"",backcolor:"FFFFFF",frontcolor:"000000",lightcolor:"000000",screencolor:"000000",width:"320",logo:"",overstretch:"false",shownavigation:"true",showstop:"false",showdigits:"true",usefullscreen:"true",usemute:"false",autostart:"false",bufferlength:"3",duration:"0",repeat:"false",sender:"",start:"0",volume:"90",link:"",linkfromdisplay:"false",linktarget:"_self"};for(itm in this.configuration)void 0!=e[itm]&&(itm.indexOf("color")>0?this.configuration[itm]=e[itm].substr(e[itm].length-6):this.configuration[itm]=e[itm]);Silverlight.createObjectEx({source:t,parentElement:i,properties:{width:this.configuration.width,height:this.configuration.height,version:"1.0",inplaceInstallPrompt:!0,isWindowless:this.configuration.windowless,background:"#"+this.configuration.backgroundcolor},events:{onLoad:this.onLoadHandler,onError:null},context:this})},jeroenwijering.Player.prototype={addListener:function(i,t){this.view.listeners.push({type:i,func:t})},getConfig:function(){return this.configuration},onLoadHandler:function(i,t,e){t.configuration.sender=e,t.controller=new jeroenwijering.Controller(t.configuration),t.view=new jeroenwijering.View(t.configuration,t.controller),t.model=new jeroenwijering.Model(t.configuration,t.controller,t.view),t.controller.startMVC(t.view,t.model)},sendEvent:function(i,t){switch(i.toUpperCase()){case"LINK":this.controller.setLink();break;case"LOAD":this.controller.setLoad(t);break;case"MUTE":this.controller.setMute();break;case"PLAY":this.controller.setPlay();break;case"SCRUB":this.controller.setScrub(t);break;case"STOP":this.controller.setStop();break;case"VOLUME":this.controller.setVolume(t)}}},jeroenwijering.Controller=function(i){this.configuration=i},jeroenwijering.Controller.prototype={startMVC:function(i,t){this.view=i,this.model=t,"true"==this.configuration.usemute?(this.view.onVolume(0),this.view.onMute(!0),this.model.goVolume(0)):(this.view.onVolume(this.configuration.volume),this.model.goVolume(this.configuration.volume)),"true"==this.configuration.autostart?this.model.goStart():this.model.goPause()},setState:function(i,t){this.state=t;var e=this.configuration.start;"Closed"==i&&e>0&&setTimeout(jeroenwijering.utils.delegate(this,this.setScrub),200,e)},setLink:function(){return 0==this.configuration.linktarget.indexOf("javascript:")?Function(this.configuration.linktarget).apply():void("_blank"==this.configuration.linktarget?window.open(this.configuration.link):""!=this.configuration.linktarget&&(window.location=this.configuration.link))},setLoad:function(i){"Closed"!=this.model.state&&this.model.goStop(),this.configuration.file=i,"true"==this.configuration.autostart&&setTimeout(jeroenwijering.utils.delegate(this.model,this.model.goStart),100)},setMute:function(){"true"==this.configuration.usemute?(this.configuration.usemute="false",this.model.goVolume(this.configuration.volume),this.view.onMute(!1)):(this.configuration.usemute="true",this.model.goVolume(0),this.view.onMute(!0))},setPlay:function(){"Buffering"==this.state||"Playing"==this.state?0==this.configuration.duration?this.model.goStop():this.model.goPause():this.model.goStart()},setScrub:function(i){2>i?i=0:i>this.configuration.duration-4&&(i=this.configuration.duration-4),"Buffering"==this.state||"Playing"==this.state?this.model.goStart(i):this.model.goPause(i)},setStop:function(){this.model.goStop()},setVolume:function(i){0>i?i=0:i>100&&(i=100),this.configuration.volume=Math.round(i),this.model.goVolume(i),this.view.onVolume(i),"true"==this.configuration.usemute&&(this.configuration.usemute="false",this.view.onMute(!1))},setFullscreen:function(){var i=!this.configuration.sender.getHost().content.FullScreen;this.configuration.sender.getHost().content.FullScreen=i,jeroenwijering.utils.delegate(this.view,this.view.onFullscreen)}},jeroenwijering.View=function(i,t){this.configuration=i,this.listeners=Array(),this.controller=t,this.fstimeout,this.fslistener,this.display=this.configuration.sender.findName("PlayerDisplay"),this.controlbar=this.configuration.sender.findName("PlayerControls"),this.configuration.sender.getHost().content.onResize=jeroenwijering.utils.delegate(this,this.resizePlayer),this.configuration.sender.getHost().content.onFullScreenChange=jeroenwijering.utils.delegate(this,this.onFullscreen),this.assignColorsClicks(),this.resizePlayer()},jeroenwijering.View.prototype={onBuffer:function(i){var t=this.configuration.sender;0==i?t.findName("BufferText").Text=null:(i=10>i?"0"+i:""+i,t.findName("BufferText").Text=i),this.delegate("BUFFER",[i])},onFullscreen:function(i){var t=this.configuration.sender,e=t.getHost().content.FullScreen;e?(this.fstimeout=setTimeout(jeroenwijering.utils.delegate(this,this.hideFSControls),2e3),this.fslistener=this.display.addEventListener("MouseMove",jeroenwijering.utils.delegate(this,this.showFSControls)),t.findName("FullscreenSymbol").Visibility="Collapsed",t.findName("FullscreenOffSymbol").Visibility="Visible"):(clearTimeout(this.fstimeout),this.display.removeEventListener("MouseMove",this.fslistener),this.controlbar.Visibility="Visible",this.display.Cursor="Hand",t.findName("FullscreenSymbol").Visibility="Visible",t.findName("FullscreenOffSymbol").Visibility="Collapsed"),this.resizePlayer(),this.delegate("FULLSCREEN")},showFSControls:function(i,t){var e=i.findName("PlayerControls"),n=t.GetPosition(e).Y;clearTimeout(this.fstimeout),this.controlbar.Visibility="Visible",this.display.Cursor="Hand",0>n&&(this.fstimeout=setTimeout(jeroenwijering.utils.delegate(this,this.hideFSControls),2e3))},hideFSControls:function(){this.controlbar.Visibility="Collapsed",this.display.Cursor="None"},onLoad:function(i){var t=this.configuration.sender,e=t.findName("TimeSlider").Width;t.findName("DownloadProgress").Width=Math.round(e*i/100),this.delegate("LOAD",[i])},onMute:function(i){var t=this.configuration.sender;this.configuration.usemute=""+i,i?(t.findName("VolumeHighlight").Visibility="Collapsed",t.findName("MuteSymbol").Visibility="Visible",t.findName("MuteOffSymbol").Visibility="Collapsed","Playing"==this.state&&(t.findName("MuteIcon").Visibility="Visible")):(t.findName("VolumeHighlight").Visibility="Visible",t.findName("MuteSymbol").Visibility="Collapsed",t.findName("MuteOffSymbol").Visibility="Visible",t.findName("MuteIcon").Visibility="Collapsed"),this.delegate("MUTE")},onState:function(i,t){var e=this.configuration.sender;this.state=t,"Buffering"==t||"Playing"==t||"Opening"==t?(e.findName("PlayIcon").Visibility="Collapsed",e.findName("PlaySymbol").Visibility="Collapsed",e.findName("PlayOffSymbol").Visibility="Visible","Playing"==t?(e.findName("BufferIcon").Visibility="Collapsed",e.findName("BufferText").Visibility="Collapsed","true"==this.configuration.usemute&&(e.findName("MuteIcon").Visibility="Visible")):(e.findName("BufferIcon").Visibility="Visible",e.findName("BufferText").Visibility="Visible")):(e.findName("MuteIcon").Visibility="Collapsed",e.findName("BufferIcon").Visibility="Collapsed",e.findName("BufferText").Visibility="Collapsed",e.findName("PlayOffSymbol").Visibility="Collapsed",e.findName("PlaySymbol").Visibility="Visible","true"==this.configuration.linkfromdisplay?e.findName("PlayIcon").Visibility="Collapsed":e.findName("PlayIcon").Visibility="Visible");try{"Completed"==i&&"Buffering"==t||"Buffering"==i&&"Paused"==t||playerStatusChange(i.toUpperCase(),t.toUpperCase())}catch(n){}this.delegate("STATE",[i,t])},onTime:function(i,t){var e=this.configuration.sender,e=this.configuration.sender,n=e.findName("TimeSlider").Width;if(t>0){var o=Math.round(n*i/t);this.configuration.duration=t,e.findName("ElapsedText").Text=jeroenwijering.utils.timestring(i),e.findName("RemainingText").Text=jeroenwijering.utils.timestring(t-i),e.findName("TimeSymbol").Visibility="Visible",e.findName("TimeSymbol")["Canvas.Left"]=o+4,e.findName("TimeHighlight").Width=o-2}else e.findName("TimeSymbol").Visibility="Collapsed";this.delegate("TIME",[i,t])},onVolume:function(i){var t=this.configuration.sender;t.findName("VolumeHighlight").Width=Math.round(i/5),this.delegate("VOLUME",[i])},assignColorsClicks:function(){this.display.Cursor="Hand",this.display.Background="#FF"+this.configuration.screencolor,"false"==this.configuration.linkfromdisplay?this.display.addEventListener("MouseLeftButtonUp",jeroenwijering.utils.delegate(this.controller,this.controller.setPlay)):(this.display.addEventListener("MouseLeftButtonUp",jeroenwijering.utils.delegate(this.controller,this.controller.setLink)),this.display.findName("PlayIcon").Visibility="Collapsed"),""!=this.configuration.logo&&(this.display.findName("OverlayCanvas").Visibility="Visible",this.display.findName("OverlayLogo").ImageSource=this.configuration.logo),this.controlbar.findName("ControlbarBack").Fill="#FF"+this.configuration.backcolor,this.assignButton("Play",this.controller.setPlay),this.assignButton("Stop",this.controller.setStop),this.configuration.sender.findName("ElapsedText").Foreground="#FF"+this.configuration.frontcolor,this.assignSlider("Time",this.changeTime),this.configuration.sender.findName("DownloadProgress").Fill="#FF"+this.configuration.frontcolor,this.configuration.sender.findName("RemainingText").Foreground="#FF"+this.configuration.frontcolor,this.assignButton("Link",this.controller.setLink),this.assignButton("Fullscreen",this.controller.setFullscreen),this.assignButton("Mute",this.controller.setMute),this.assignSlider("Volume",this.changeVolume)},assignButton:function(i,t){var e=this.configuration.sender.findName(i+"Button");e.Cursor="Hand",e.addEventListener("MouseLeftButtonUp",jeroenwijering.utils.delegate(this.controller,t)),e.addEventListener("MouseEnter",jeroenwijering.utils.delegate(this,this.rollOver)),e.addEventListener("MouseLeave",jeroenwijering.utils.delegate(this,this.rollOut)),this.configuration.sender.findName(i+"Symbol").Fill="#FF"+this.configuration.frontcolor;try{this.configuration.sender.findName(i+"OffSymbol").Fill="#FF"+this.configuration.frontcolor}catch(n){}},assignSlider:function(i,t){var e=this.configuration.sender.findName(i+"Button");e.Cursor="Hand",e.addEventListener("MouseLeftButtonUp",jeroenwijering.utils.delegate(this,t)),e.addEventListener("MouseEnter",jeroenwijering.utils.delegate(this,this.rollOver)),e.addEventListener("MouseLeave",jeroenwijering.utils.delegate(this,this.rollOut)),this.configuration.sender.findName(i+"Slider").Fill="#FF"+this.configuration.frontcolor,this.configuration.sender.findName(i+"Highlight").Fill="#FF"+this.configuration.frontcolor,this.configuration.sender.findName(i+"Symbol").Fill="#FF"+this.configuration.frontcolor},delegate:function(i,t){for(var e=0;e<this.listeners.length;e++)this.listeners[e].type.toUpperCase()==i&&this.listeners[e].func.apply(null,t)},rollOver:function(i){var t=i.Name.substr(0,i.Name.length-6);this.configuration.sender.findName(t+"Symbol").Fill="#FF"+this.configuration.lightcolor;try{this.configuration.sender.findName(t+"OffSymbol").Fill="#FF"+this.configuration.lightcolor}catch(e){}},rollOut:function(i){var t=i.Name.substr(0,i.Name.length-6);this.configuration.sender.findName(t+"Symbol").Fill="#FF"+this.configuration.frontcolor;try{this.configuration.sender.findName(t+"OffSymbol").Fill="#FF"+this.configuration.frontcolor}catch(e){}},changeTime:function(i,t){var e=i.findName("TimeSlider"),n=t.GetPosition(e).X,o=Math.floor(n/e.Width*this.configuration.duration);this.controller.setScrub(o)},changeVolume:function(i,t){var e=i.findName("VolumeButton"),n=t.GetPosition(e).X;this.controller.setVolume(5*n)},resizePlayer:function(){var i=this.configuration.sender.getHost().content.actualWidth,t=this.configuration.sender.getHost().content.actualHeight,e=this.configuration.sender.getHost().content.FullScreen;"true"==this.configuration.shownavigation?1==e?(this.resizeDisplay(i,t),this.controlbar["Canvas.Left"]=Math.round(i/2-250),this.resizeControlbar(500,t-this.controlbar.Height-16),this.controlbar.findName("ControlbarBack").Opacity=.5):(this.resizeDisplay(i,t-20),this.controlbar["Canvas.Left"]=0,this.resizeControlbar(i,t-this.controlbar.Height),this.controlbar.findName("ControlbarBack").Opacity=1):this.resizeDisplay(i,t)},resizeDisplay:function(i,t){this.stretchElement("PlayerDisplay",i,t),this.stretchElement("VideoWindow",i,t),this.stretchElement("PlaceholderImage",i,t),this.centerElement("PlayIcon",i,t),this.centerElement("MuteIcon",i,t),this.centerElement("BufferIcon",i,t),this.centerElement("BufferText",i,t),this.display.findName("OverlayCanvas")["Canvas.Left"]=i-this.display.findName("OverlayCanvas").Width-10,this.display.Visibility="Visible"},resizeControlbar:function(i,t,e){this.controlbar["Canvas.Top"]=t,this.stretchElement("PlayerControls",i),this.stretchElement("ControlbarBack",i),this.placeElement("PlayButton",0);var n=17;this.placeElement("VolumeButton",i-24),this.placeElement("MuteButton",i-37);var o=37;"true"==this.configuration.showstop?(this.placeElement("StopButton",n),n+=17):this.controlbar.findName("StopButton").Visibility="Collapsed","true"==this.configuration.usefullscreen?(o+=18,this.placeElement("FullscreenButton",i-o)):this.controlbar.findName("FullscreenButton").Visibility="Collapsed",""!=this.configuration.link?(o+=18,this.placeElement("LinkButton",i-o)):this.controlbar.findName("LinkButton").Visibility="Collapsed","true"==this.configuration.showdigits&&i-o-n>160?(o+=35,this.controlbar.findName("RemainingButton").Visibility="Visible",this.controlbar.findName("ElapsedButton").Visibility="Visible",this.placeElement("RemainingButton",i-o),this.placeElement("ElapsedButton",n),n+=35):(this.controlbar.findName("RemainingButton").Visibility="Collapsed",this.controlbar.findName("ElapsedButton").Visibility="Collapsed"),this.placeElement("TimeButton",n),this.stretchElement("TimeButton",i-n-o),this.stretchElement("TimeShadow",i-n-o),this.stretchElement("TimeStroke",i-n-o),this.stretchElement("TimeFill",i-n-o),this.stretchElement("TimeSlider",i-n-o-10),this.stretchElement("DownloadProgress",i-n-o-10);var s=this.configuration.sender.findName("TimeSymbol");this.stretchElement("TimeHighlight",s["Canvas.Left"]-5),this.controlbar.Visibility="Visible"},centerElement:function(i,t,e){var n=this.configuration.sender.findName(i);n["Canvas.Left"]=Math.round(t/2-n.Width/2),n["Canvas.Top"]=Math.round(e/2-n.Height/2)},stretchElement:function(i,t,e){var n=this.configuration.sender.findName(i);n.Width=t,void 0!=e&&(n.Height=e)},placeElement:function(i,t,e){var n=this.configuration.sender.findName(i);n["Canvas.Left"]=t,e&&(n["Canvas.Top"]=e)}},jeroenwijering.Model=function(i,t,e){this.configuration=i,this.controller=t,this.view=e,this.video=this.configuration.sender.findName("VideoWindow"),this.preview=this.configuration.sender.findName("PlaceholderImage");var n={"true":"UniformToFill","false":"Uniform",fit:"Fill",none:"None"};this.state=this.video.CurrentState,this.timeint,this.video.Stretch=n[this.configuration.overstretch],this.preview.Stretch=n[this.configuration.overstretch],this.video.BufferingTime=jeroenwijering.utils.spanstring(this.configuration.bufferlength),this.video.AutoPlay=!0,this.video.AddEventListener("CurrentStateChanged",jeroenwijering.utils.delegate(this,this.stateChanged)),this.video.AddEventListener("MediaEnded",jeroenwijering.utils.delegate(this,this.mediaEnded)),this.video.AddEventListener("BufferingProgressChanged",jeroenwijering.utils.delegate(this,this.bufferChanged)),this.video.AddEventListener("DownloadProgressChanged",jeroenwijering.utils.delegate(this,this.downloadChanged)),""!=this.configuration.image&&(this.preview.Source=this.configuration.image)},jeroenwijering.Model.prototype={goPause:function(i){this.video.pause(),isNaN(i)||(this.video.Position=jeroenwijering.utils.spanstring(i)),this.timeChanged()},goStart:function(i){this.video.Visibility="Visible",this.preview.Visibility="Collapsed","Closed"==this.state?this.video.Source=this.configuration.file:this.video.play(),isNaN(i)||(this.video.Position=jeroenwijering.utils.spanstring(i))},goStop:function(){this.video.Visibility="Collapsed",this.preview.Visibility="Visible",this.goPause(0),this.video.Source="null",this.view.onBuffer(0),clearInterval(this.timeint)},goVolume:function(i){this.video.Volume=i/100},stateChanged:function(){var i=this.video.CurrentState;i!=this.state&&(this.controller.setState(this.state,i),this.view.onState(this.state,i),this.state=i,this.configuration.duration=Math.round(10*this.video.NaturalDuration.Seconds)/10,"Playing"!=i&&"Buffering"!=i&&"Opening"!=i?clearInterval(this.timeint):this.timeint=setInterval(jeroenwijering.utils.delegate(this,this.timeChanged),100))},mediaEnded:function(){"true"==this.configuration.repeat?this.goStart(0):(this.state="Completed",this.view.onState(this.state,"Completed"),this.video.Visibility="Collapsed",this.preview.Visibility="Visible",this.goPause(0))},bufferChanged:function(){var i=Math.round(100*this.video.BufferingProgress);this.view.onBuffer(i)},downloadChanged:function(){var i=Math.round(100*this.video.DownloadProgress);this.view.onLoad(i)},timeChanged:function(){var i=Math.round(10*this.video.Position.Seconds)/10;this.view.onTime(i,this.configuration.duration)}},jeroenwijering.utils.delegate=function(i,t){return function(){return t.apply(i,arguments)}},jeroenwijering.utils.timestring=function(i){var t=Math.floor(i/3600),e=Math.floor(i%3600/60),n=Math.round(i%60),o="";return o+=n>9?n:"0"+n,o=e>9?e+":"+o:"0"+e+":"+o,t>0?o=t+":"+o:null,o},jeroenwijering.utils.spanstring=function(i){var t=Math.floor(i/3600),e=Math.floor(i%3600/60),n=Math.round(i%60*10)/10,o=t+":"+e+":"+n;return o};